{"ast":null,"code":"import * as actionTypes from '../constants/cartConstants';\nimport axios from 'axios';\nimport { Api } from '../../utils/Api';\nimport { convertToCartData } from '../../utils/utils.function';\nexport const addToCart = (id, qty) => async dispatch => {\n  const {\n    data\n  } = await Api.getRequest(`/api/products/${id}`);\n  const product = JSON.parse(data);\n  // console.log(product)\n  dispatch({\n    type: actionTypes.ADD_TO_CART,\n    payload: {\n      product: product._id,\n      name: product.name,\n      imageUrl: product.imageUrl,\n      price: product.price,\n      countInStock: product.countInStock,\n      qty\n    }\n  });\n  Api.postRequest('/api/cart', {\n    productId: id,\n    count: qty\n  });\n};\nexport const removeFromCart = _ref => {\n  let {\n    pId,\n    _id\n  } = _ref;\n  return dispatch => {\n    try {\n      Api.DeleteRequest('/api/cart/' + _id);\n      dispatch({\n        type: actionTypes.REMOVE_FROM_CART,\n        payload: pId\n      }, fetchCart());\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\nexport const fetchCart = () => async dispatch => {\n  try {\n    const {\n      data: strigifyData\n    } = await Api.getRequest(`/api/cart/`);\n    // console.log({strigifyData})\n    const {\n      carts\n    } = JSON.parse(strigifyData);\n    // console.log(carts)\n\n    dispatch({\n      type: actionTypes.FETCH_MY_CART,\n      payload: {\n        carts: convertToCartData(carts)\n      }\n    });\n  } catch (e) {\n    console.log('EROROR :  ', e);\n  }\n};\n\n// x = [\n//   {\n//     product: '615ac2b036ecb5ed71497630',\n//     name: 'Cannon EOS-1D',\n//     imageUrl:\n//       'https://images.unsplash.com/photo-1519183071298-a2962feb14f4?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',\n//     price: 1300,\n//     countInStock: 5,\n//     qty: '3',\n//   },\n//   {\n//     product: '615ac2b036ecb5ed71497631',\n//     name: 'Amazon Alexa',\n//     imageUrl:\n//       'https://images.unsplash.com/photo-1518444065439-e933c06ce9cd?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1267&q=80',\n//     price: 50,\n//     countInStock: 25,\n//     qty: '3',\n//   },\n// ]","map":{"version":3,"names":["actionTypes","axios","Api","convertToCartData","addToCart","id","qty","dispatch","data","getRequest","product","JSON","parse","type","ADD_TO_CART","payload","_id","name","imageUrl","price","countInStock","postRequest","productId","count","removeFromCart","pId","DeleteRequest","REMOVE_FROM_CART","fetchCart","error","console","log","strigifyData","carts","FETCH_MY_CART","e"],"sources":["C:/Users/djofr/OneDrive/Bureau/Nouveau dossier (6)/e-commerce-store/e-comerce-frontend/src/redux/actions/cartActions.js"],"sourcesContent":["import * as actionTypes from '../constants/cartConstants'\r\nimport axios from 'axios'\r\nimport {Api} from '../../utils/Api'\r\nimport {convertToCartData} from '../../utils/utils.function'\r\n\r\nexport const addToCart = (id, qty) => async (dispatch) => {\r\n  const {data} = await Api.getRequest(`/api/products/${id}`)\r\n  const product = JSON.parse(data)\r\n  // console.log(product)\r\n  dispatch({\r\n    type: actionTypes.ADD_TO_CART,\r\n    payload: {\r\n      product: product._id,\r\n      name: product.name,\r\n      imageUrl: product.imageUrl,\r\n      price: product.price,\r\n      countInStock: product.countInStock,\r\n      qty,\r\n    },\r\n  })\r\n\r\n  Api.postRequest('/api/cart', {productId: id, count: qty})\r\n}\r\n\r\nexport const removeFromCart =({pId, _id}) =>(dispatch) => {\r\n  try {\r\n    Api.DeleteRequest('/api/cart/' + _id)\r\n    dispatch({\r\n      type: actionTypes.REMOVE_FROM_CART,\r\n      payload: pId,\r\n    },fetchCart())\r\n    \r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n  \r\n   \r\n  }\r\n\r\nexport const fetchCart = () => async (dispatch) => {\r\n  try {\r\n    const {data: strigifyData} = await Api.getRequest(`/api/cart/`)\r\n    // console.log({strigifyData})\r\n    const {carts} = JSON.parse(strigifyData)\r\n    // console.log(carts)\r\n\r\n    dispatch({\r\n      type: actionTypes.FETCH_MY_CART,\r\n      payload: {\r\n        carts: convertToCartData(carts),\r\n      },\r\n    })\r\n  } catch (e) {\r\n    console.log('EROROR :  ', e)\r\n  }\r\n}\r\n\r\n// x = [\r\n//   {\r\n//     product: '615ac2b036ecb5ed71497630',\r\n//     name: 'Cannon EOS-1D',\r\n//     imageUrl:\r\n//       'https://images.unsplash.com/photo-1519183071298-a2962feb14f4?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',\r\n//     price: 1300,\r\n//     countInStock: 5,\r\n//     qty: '3',\r\n//   },\r\n//   {\r\n//     product: '615ac2b036ecb5ed71497631',\r\n//     name: 'Amazon Alexa',\r\n//     imageUrl:\r\n//       'https://images.unsplash.com/photo-1518444065439-e933c06ce9cd?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1267&q=80',\r\n//     price: 50,\r\n//     countInStock: 25,\r\n//     qty: '3',\r\n//   },\r\n// ]\r\n"],"mappings":"AAAA,OAAO,KAAKA,WAAW,MAAM,4BAA4B;AACzD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAAQC,GAAG,QAAO,iBAAiB;AACnC,SAAQC,iBAAiB,QAAO,4BAA4B;AAE5D,OAAO,MAAMC,SAAS,GAAG,CAACC,EAAE,EAAEC,GAAG,KAAK,MAAOC,QAAQ,IAAK;EACxD,MAAM;IAACC;EAAI,CAAC,GAAG,MAAMN,GAAG,CAACO,UAAU,CAAE,iBAAgBJ,EAAG,EAAC,CAAC;EAC1D,MAAMK,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC;EAChC;EACAD,QAAQ,CAAC;IACPM,IAAI,EAAEb,WAAW,CAACc,WAAW;IAC7BC,OAAO,EAAE;MACPL,OAAO,EAAEA,OAAO,CAACM,GAAG;MACpBC,IAAI,EAAEP,OAAO,CAACO,IAAI;MAClBC,QAAQ,EAAER,OAAO,CAACQ,QAAQ;MAC1BC,KAAK,EAAET,OAAO,CAACS,KAAK;MACpBC,YAAY,EAAEV,OAAO,CAACU,YAAY;MAClCd;IACF;EACF,CAAC,CAAC;EAEFJ,GAAG,CAACmB,WAAW,CAAC,WAAW,EAAE;IAACC,SAAS,EAAEjB,EAAE;IAAEkB,KAAK,EAAEjB;EAAG,CAAC,CAAC;AAC3D,CAAC;AAED,OAAO,MAAMkB,cAAc,GAAE;EAAA,IAAC;IAACC,GAAG;IAAET;EAAG,CAAC;EAAA,OAAKT,QAAQ,IAAK;IACxD,IAAI;MACFL,GAAG,CAACwB,aAAa,CAAC,YAAY,GAAGV,GAAG,CAAC;MACrCT,QAAQ,CAAC;QACPM,IAAI,EAAEb,WAAW,CAAC2B,gBAAgB;QAClCZ,OAAO,EAAEU;MACX,CAAC,EAACG,SAAS,EAAE,CAAC;IAEhB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB;EAGA,CAAC;AAAA;AAEH,OAAO,MAAMD,SAAS,GAAG,MAAM,MAAOrB,QAAQ,IAAK;EACjD,IAAI;IACF,MAAM;MAACC,IAAI,EAAEwB;IAAY,CAAC,GAAG,MAAM9B,GAAG,CAACO,UAAU,CAAE,YAAW,CAAC;IAC/D;IACA,MAAM;MAACwB;IAAK,CAAC,GAAGtB,IAAI,CAACC,KAAK,CAACoB,YAAY,CAAC;IACxC;;IAEAzB,QAAQ,CAAC;MACPM,IAAI,EAAEb,WAAW,CAACkC,aAAa;MAC/BnB,OAAO,EAAE;QACPkB,KAAK,EAAE9B,iBAAiB,CAAC8B,KAAK;MAChC;IACF,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOE,CAAC,EAAE;IACVL,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEI,CAAC,CAAC;EAC9B;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}