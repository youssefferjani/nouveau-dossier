{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { Api } from '../Api';\nimport { logout } from '../localstorage';\nfunction useLogin() {\n  _s();\n  const [loginInfo, setLoginInfo] = useState({\n    loading: true,\n    isLogin: false\n  });\n  const {\n    replace\n  } = useHistory();\n  const checkLogin = useCallback(async () => {\n    const {\n      statusCode,\n      data\n    } = await Api.getRequest(`/api/user/me`);\n    // console.log({statusCode, data})\n    if (statusCode === 400 || statusCode === 500) {\n      replace('/');\n      logout();\n      return;\n    }\n    setLoginInfo({\n      loading: false,\n      isLogin: true\n    });\n  }, [replace]);\n  useEffect(() => {\n    checkLogin();\n  }, [checkLogin]);\n  return {\n    loginInfo\n  };\n}\n_s(useLogin, \"Zh+nM/rFkpohrOlM3W96kAej7vg=\", false, function () {\n  return [useHistory];\n});\nexport default useLogin;","map":{"version":3,"names":["React","useCallback","useEffect","useState","useSelector","useHistory","Api","logout","useLogin","loginInfo","setLoginInfo","loading","isLogin","replace","checkLogin","statusCode","data","getRequest"],"sources":["C:/Users/djofr/OneDrive/Bureau/Nouveau dossier (6)/e-commerce-store/e-comerce-frontend/src/utils/hooks/useLogin.js"],"sourcesContent":["import React, {useCallback, useEffect, useState} from 'react'\r\nimport {useSelector} from 'react-redux'\r\nimport {useHistory} from 'react-router'\r\nimport {Api} from '../Api'\r\nimport {logout} from '../localstorage'\r\n\r\nfunction useLogin() {\r\n  const [loginInfo, setLoginInfo] = useState({\r\n    loading: true,\r\n    isLogin: false,\r\n  })\r\n  const {replace} = useHistory()\r\n  const checkLogin = useCallback(async () => {\r\n    const {statusCode, data} = await Api.getRequest(`/api/user/me`)\r\n    // console.log({statusCode, data})\r\n    if (statusCode === 400 || statusCode === 500) {\r\n      replace('/')\r\n      logout()\r\n      return\r\n    }\r\n    setLoginInfo({loading: false, isLogin: true})\r\n  }, [replace])\r\n  useEffect(() => {\r\n    checkLogin()\r\n  }, [checkLogin])\r\n  return {loginInfo}\r\n}\r\n\r\nexport default useLogin\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAGC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAC7D,SAAQC,WAAW,QAAO,aAAa;AACvC,SAAQC,UAAU,QAAO,cAAc;AACvC,SAAQC,GAAG,QAAO,QAAQ;AAC1B,SAAQC,MAAM,QAAO,iBAAiB;AAEtC,SAASC,QAAQ,GAAG;EAAA;EAClB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGP,QAAQ,CAAC;IACzCQ,OAAO,EAAE,IAAI;IACbC,OAAO,EAAE;EACX,CAAC,CAAC;EACF,MAAM;IAACC;EAAO,CAAC,GAAGR,UAAU,EAAE;EAC9B,MAAMS,UAAU,GAAGb,WAAW,CAAC,YAAY;IACzC,MAAM;MAACc,UAAU;MAAEC;IAAI,CAAC,GAAG,MAAMV,GAAG,CAACW,UAAU,CAAE,cAAa,CAAC;IAC/D;IACA,IAAIF,UAAU,KAAK,GAAG,IAAIA,UAAU,KAAK,GAAG,EAAE;MAC5CF,OAAO,CAAC,GAAG,CAAC;MACZN,MAAM,EAAE;MACR;IACF;IACAG,YAAY,CAAC;MAACC,OAAO,EAAE,KAAK;MAAEC,OAAO,EAAE;IAAI,CAAC,CAAC;EAC/C,CAAC,EAAE,CAACC,OAAO,CAAC,CAAC;EACbX,SAAS,CAAC,MAAM;IACdY,UAAU,EAAE;EACd,CAAC,EAAE,CAACA,UAAU,CAAC,CAAC;EAChB,OAAO;IAACL;EAAS,CAAC;AACpB;AAAC,GApBQD,QAAQ;EAAA,QAKGH,UAAU;AAAA;AAiB9B,eAAeG,QAAQ"},"metadata":{},"sourceType":"module"}